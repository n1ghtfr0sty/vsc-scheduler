# VSC Scheduler Project - Development Log

**Date**: 2026-02-20  
**Time**: 12:20 PM - 1:55 PM (approximately)

---

## Project Overview

Created a full-stack web application for **Vikings Soccer Club (VSC)** to manage youth soccer game scheduling with conflict detection.

### Tech Stack
- Backend: Node.js + Express.js
- Database: SQLite (better-sqlite3)
- Frontend: Vanilla HTML/CSS/JavaScript (SPA)
- Auth: Session-based with bcryptjs
- Process Manager: PM2 (for production)

---

## Actions Taken

### 1. Requirements Gathering

- Determined project is a full-stack webapp with vanilla JS frontend
- Discussed scheduling needs: games at locations, conflict detection
- Identified user roles: Admin, Coach, Family
- Defined conflict types:
  - Player already scheduled
  - Family member (sibling) scheduled at same time
  - Coach already has a game
- Set location-based rules:
  - Same location: 0 minutes between games
  - Different location: 90 minutes travel time (configurable)
- Decided on data model: seasons aligned with school year (Fall, Winter, Spring, Summer)
- Agreed on session-based auth, local time storage, 90-minute default game duration
- Requested sample data seeding for testing

### 2. Project Planning

- Created detailed specification document
- Defined data model with tables: users, families, players, teams, player_teams, coaches, team_coaches, opponents, seasons, games, settings
- Outlined API endpoints for all CRUD operations
- Defined role-based access control (RBAC)
- Planned frontend pages and routing
- Designed conflict detection algorithm

### 3. File Creation

Created the following project structure:

```
D:\Programming\VSCode\Scheduler\
├── .env                              # Environment variables
├── package.json                      # Node.js dependencies
├── ecosystem.config.js               # PM2 production config
├── AGENTS.md                         # Agent guidelines for future development
├── public/
│   ├── index.html                   # Main SPA entry point
│   ├── css/
│   │   └── style.css                # Full CSS with theming
│   └── js/
│       ├── api.js                   # API client wrapper
│       ├── auth.js                  # Authentication helpers
│       ├── router.js                # Client-side hash router
│       └── app.js                   # Main application with all page renders
└── src/
    ├── db.js                        # SQLite connection (better-sqlite3)
    ├── schema.js                    # Database schema definition
    ├── seed.js                      # Sample data seeder
    ├── index.js                     # Express server entry point
    ├── middleware/
    │   └── auth.js                  # Auth middleware (requireAuth, requireRole)
    └── routes/
        ├── auth.js                   # Register, login, logout, me
        ├── families.js              # Family CRUD
        ├── players.js               # Player CRUD + team assignment
        ├── teams.js                 # Team CRUD
        ├── coaches.js               # Coach CRUD
        ├── opponents.js             # Opponent CRUD
        ├── seasons.js              # Season CRUD
        ├── games.js                # Game CRUD + conflict detection
        └── settings.js             # Settings + import/export
```

### 4. Key Features Implemented

#### Backend
- Express.js server with static file serving
- Session-based authentication
- Role-based middleware (admin, coach, family)
- SQLite database with WAL mode
- Full CRUD for all entities
- Conflict detection algorithm with configurable travel times
- Import/export functionality (JSON format)
- Comprehensive error handling

#### Frontend
- Single-page application with hash-based routing
- Responsive CSS with custom properties
- Login/registration forms
- Dashboard with statistics
- Schedule view with filtering by season/team
- Game management (create, edit, delete)
- Real-time conflict checking when creating/editing games
- Team, player, opponent, season management pages
- Settings page with travel time configuration
- Import/export data functionality

#### Sample Data
- 1 Admin user, 2 Coach users, 3 Family users
- 4 Teams (U10 Boys, U12 Girls, U14 Boys, U16 Girls)
- 5 Players across 3 families
- 8 Opponents
- 2 Seasons (Fall '25, Winter '25)
- 10 Games (including intentional conflicts for testing)

### 5. Testing Credentials

| Role   | Email              | Password    |
|--------|-------------------|-------------|
| Admin  | admin@vsc.com     | password123 |
| Coach  | coach1@vsc.com    | password123 |
| Coach  | coach2@vsc.com    | password123 |
| Family | family1@vsc.com   | password123 |
| Family | family2@vsc.com   | password123 |
| Family | family3@vsc.com   | password123 |

---

## Deployment Notes

### Server Requirements
- Debian 12 (already exists)
- Node.js 20.x
- PM2 (process manager)
- nginx on port 5000 (already configured)

### Deployment Steps
1. Upload project to `/var/www/vsc-scheduler/`
2. Run `npm install`
3. Run `npm run seed` to create database
4. Configure nginx to proxy port 5000 → 3000
5. Start with PM2: `pm2 start ecosystem.config.js`

### Environment Configuration
- `PORT=3000` (Express runs on 3000, nginx proxies from 5000)
- `NODE_ENV=production`
- `SESSION_SECRET` should be changed in production
- `DB_PATH=./data/vsc.db`

---

## Questions Answered

1. **Tech Stack**: Vanilla HTML/CSS/JS with Node.js backend, SQLite database
2. **Server**: Existing Debian 12 on Linode
3. **Domain**: ss26.ohio-jones.com (Cloudflare proxied)
4. **HTTPS**: Handled by Cloudflare proxy
5. **Scheduling**: Games at locations, conflict detection for players/families/coaches
6. **Seasons**: Option B naming (Fall '25, Winter '25, etc.)
7. **Filtering**: Sort by season in UI
8. **Game Days**: Any day of the week (not limited)
9. **Conflict Suggestions**: Both directions (before and after)
10. **Travel Time**: Configurable, 0 min same location, 90 min different location default

---

## Files Created (24 total)

1. `.env`
2. `package.json`
3. `ecosystem.config.js`
4. `AGENTS.md`
5. `public/index.html`
6. `public/css/style.css`
7. `public/js/api.js`
8. `public/js/auth.js`
9. `public/js/router.js`
10. `public/js/app.js`
11. `src/db.js`
12. `src/schema.js`
13. `src/seed.js`
14. `src/index.js`
15. `src/middleware/auth.js`
16. `src/routes/auth.js`
17. `src/routes/families.js`
18. `src/routes/players.js`
19. `src/routes/teams.js`
20. `src/routes/coaches.js`
21. `src/routes/opponents.js`
22. `src/routes/seasons.js`
23. `src/routes/games.js`
24. `src/routes/settings.js`

---

## Notes

- No TypeScript used (vanilla JS)
- No build step required
- Session auth with express-session
- All times stored in local time
- Default game duration: 90 minutes
- Travel time is configurable via settings
- Sample data includes intentional conflicts for testing

---

*Log created by opencode agent*
